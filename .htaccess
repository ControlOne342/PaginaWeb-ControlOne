# --- CONFIGURACIÓN VITAL DE PHP (NO BORRAR) ---
# php -- BEGIN cPanel-generated handler, do not edit
<IfModule mime_module>
  AddHandler application/x-httpd-ea-php82___lsphp .php .php8 .phtml
</IfModule>
# php -- END cPanel-generated handler, do not edit

# --- INICIO DE REGLAS CONTROL ONE ---
Options -Indexes
RewriteEngine On
# Forzar NO usar WWW (Es más limpio)
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ https://%1/$1 [R=301,L]

# 1. SOPORTE PARA IMÁGENES AVIF (Vital para que se vean)
<IfModule mod_mime.c>
  AddType image/avif .avif
</IfModule>

# 2. FORZAR HTTPS (Seguridad - Arregla el error de SE Ranking)
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
# --- REGLAS DEL BLOG (AGREGAR ESTO) ---
# Redirigir /blog a blog.php
RewriteRule ^blog/?$ blog.php [L]

# Redirigir /post/nombre-articulo a post.php?slug=nombre-articulo
RewriteRule ^post/([a-zA-Z0-9-]+)$ post.php?slug=$1 [L,QSA]
# --------------------------------------
# 3. URLS LIMPIAS (Quitar el .php)
# Convierte controlone.com.mx/contacto.php en /contacto
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^\.]+)$ $1.php [NC,L]

# 4. CACHÉ DE NAVEGADOR (Velocidad Extrema)
<IfModule mod_expires.c>
  ExpiresActive On
  # Imágenes - 1 año
  ExpiresByType image/jpg "access plus 1 year"
  ExpiresByType image/jpeg "access plus 1 year"
  ExpiresByType image/gif "access plus 1 year"
  ExpiresByType image/png "access plus 1 year"
  ExpiresByType image/webp "access plus 1 year"
  ExpiresByType image/avif "access plus 1 year"
  ExpiresByType image/svg+xml "access plus 1 year"
  ExpiresByType image/x-icon "access plus 1 year"
  
  # Estilos y Scripts - 1 mes
  ExpiresByType text/css "access plus 1 month"
  ExpiresByType text/javascript "access plus 1 month"
  ExpiresByType application/javascript "access plus 1 month"
  
  # Documentos - 1 mes
  ExpiresByType application/pdf "access plus 1 month"
</IfModule>